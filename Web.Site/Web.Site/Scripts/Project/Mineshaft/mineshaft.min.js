function getPoolInfo(n,t){clearTarget();getPartial("#mainContentResult","/Mineshaft/GetMineshaftInfo?id="+n,!1,function(){setItem(n);t&&scrollToItem(n)})}function clearTarget(){var n=$("#mainContentResult");n&&(n.off(),n.unbind(),n.empty())}function setItem(n){$(".mineshaft-btn").removeClass("active");$("#mineshaft-btn-"+n).addClass("active")}function scrollToItem(n){var t=$("#mineshaft-btn-"+n),i,r,u;t&&(i=0,t.position()&&(i=t.position().top),r=t.height()*3,u=$(".stackmenu-body").height(),i>u-r&&$(".stackmenu-body").animate({scrollTop:i-r}))}function updateAlgoData(n){$(".algoData-content").hide();$(".algoData-btn").removeClass("active");$("#algoData-content-"+(n||"")).show();$("#algoData-btn-"+(n||"")).addClass("active");$.fn.dataTable.isDataTable("#algoData-"+(n||""))?$("#algoData-"+(n||"")).DataTable().ajax.reload():$("#algoData-"+(n||"")).dataTable({order:[[4,"desc"]],lengthChange:!1,processing:!1,bServerSide:!1,searching:!1,paging:!1,scrollCollapse:!0,scrollY:"100%",sAjaxSource:"/Mineshaft/GetAlgoSummary",fnServerParams:function(t){t.push({name:"algoType",value:n})},sServerMethod:"POST",info:!1,language:{emptyTable:""},columnDefs:[{targets:[0,1,10,11],visible:!1},{targets:[2],render:function(n,t,i){return'<div style="display:inline-block"><div class="sprite-small small/'+n+'-small.png"><\/div><a href="/Mineshaft?pool='+n+"&Algo="+i[3]+'"> '+i[1]+" ("+n+")<\/a><\/div>"}},{targets:[4],render:function(n,t,i){return'<span class="minercount-pool-'+i[0]+'">'+n+"<\/span>"}},{targets:[6],iDataSort:10,render:function(n,t,i){return'<span class="hashrate-pool-'+i[0]+'">'+hashrateLabel(n)+"<\/span>"}},{targets:[7],iDataSort:11,render:function(n,t,i){return'<span class="hashrate-network-'+i[0]+'">'+hashrateLabel(n)+"<\/span>"}},{targets:[8],render:function(n){return(+n).toFixed(8)}}],fnRowCallback:function(n,t){$(n).addClass("algoData-pool-"+t[0])},fnFooterCallback:function(t,i){for(var u=0,r=0;r<i.length;r++)u+=+i[r][6];$("#summary-total-"+(n||"")).html(hashrateLabel(u))},fnDrawCallback:function(){var i=0,t;$("#algoData-"+(n||"")+" > tbody  > tr").each(function(){var n=+$(this).find("td:nth-child(7)").text();n>i&&(i=n,t=$(this))});t&&$(t).addClass("info")}})}var selectedChart="hashrate",contentWrapper=$("#wrapper"),selectedAlgo=contentWrapper.data("summaryalgo"),currentPoolId=contentWrapper.data("poolid"),username=$("#wrapper").data("username"),miningname=$("#wrapper").data("miningname"),searchDelayTimer,baseMarket,mineshaftHub;$("#baseAlgos","#pools-menu").change(function(){var n,i=$(this).val(),r,t;selectedAlgo=i;updateAlgoData(selectedAlgo);i?($(".mineshaftalgo").removeClass("bold-text"),$(".mineshaft-btn","#mineshaftinfo-btn-list").hide(),n=$(".mineshaft-btn-base-"+selectedAlgo,"#mineshaftinfo-btn-list")):($(".mineshaftalgo").addClass("bold-text"),n=$(".mineshaft-btn","#mineshaftinfo-btn-list"));r=$("#pools-search","#pools-menu");t=($(r).val()||"").toLowerCase();t&&t!==""?$.each(n,function(){var n=$(this);n.find(".search-data").text().toLowerCase().indexOf(t)==-1?n.hide():n.show()}):n.show()});$(".mineshaft-btn").on("click",function(){var n=$(this).data("pool"),t=$(this).data("poolid"),i=$(this).data("basealgo");n&&(selectedAlgo=i,getPoolInfo(t),History.pushState({},"Cryptopia - Mineshaft","?pool="+n+"&Algo="+selectedAlgo))});$("#pools-search","#pools-menu").on("change keyup paste search",function(){var n=$(this);clearTimeout(searchDelayTimer);searchDelayTimer=setTimeout(function(){var i=$(n).val(),t,r,u;i&&i!=""?($("#baseAlgos","#pools-menu").val(null),$(".mineshaftalgo").addClass("bold-text"),t=$(".mineshaft-btn","#mineshaftinfo-btn-list"),t.hide(),r=$("#pools-search"),u=$(r).val().toLowerCase(),$.each(t,function(){var n=$(this);n.find(".search-data").text().toLowerCase().indexOf(u)==-1?n.hide():n.show()})):($("#baseAlgos","#pools-menu").val(selectedAlgo),$(".mineshaftalgo").removeClass("bold-text"),$(".mineshaft-btn","#mineshaftinfo-btn-list").hide(),$(".mineshaft-btn-base-"+selectedAlgo,"#mineshaftinfo-btn-list").show())},500)});currentPoolId?($("#baseAlgos").val(selectedAlgo).trigger("change"),getPoolInfo(currentPoolId,!0)):(clearTarget(),baseMarket=$("#mainContentResult").data("basealgo"),getPartial("#mainContentResult","/Mineshaft/MineshaftSummary?algoType="+baseMarket,!1,function(){}));mineshaftHub=$.connection.mineshaftHub;mineshaftHub.client.SendDataNotification=function(n){if(typeof mineshaftDataUpdate=="function"&&mineshaftDataUpdate(n),n.Type==0){var t=$("#mineshaft-btn-"+n.PoolId);t.find(".mineshafthashrate-sm, .mineshafthashrate").text(hashrateLabel(n.Hashrate));$(".hashrate-pool-"+n.PoolId).text(hashrateLabel(n.Hashrate));$(".hashrate-network-"+n.PoolId).text(hashrateLabel(n.NetworkHashrate));$(".minercount-pool-"+n.PoolId).text(n.UserCount)}};