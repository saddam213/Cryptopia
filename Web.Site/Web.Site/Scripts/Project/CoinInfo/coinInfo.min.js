function showInformation(n){postJson(summaryAction,{currencyId:n},function(t){$("#currencyTarget").html(Mustache.render(messageTemplate,{currencyId:n,symbol:t.Symbol,name:t.Name,starRating:getStarRating(t.StarRating),ratingSummary:t.StarRating>=0?String.format(Resources.CoinInfo.InfoRatingText,t.StarRating):Resources.CoinInfo.InfoRatingUnratedText,maxRating:t.MaxRating,totalRating:t.TotalRating,statusMessage:t.StatusMessage,hasWarningBackground:t.ListingStatus==="Active"&&t.Status!=="OK",hasDangerBackground:t.ListingStatus==="Delisting",algo:t.AlgoType,network:t.NetworkType,block:t.CurrentBlock,blockTime:t.BlockTime,blockReward:t.BlockReward.toFixed(8),totalCoin:t.TotalCoin.toFixed(8),posRate:t.PosRate,minStakeAge:t.MinStakeAge||Resources.General.NotAwailable,maxStakeAge:t.MaxStakeAge||Resources.General.NotAwailable,diffRetarget:t.DiffRetarget,website:t.Website,source:t.Source,blockExplorer:t.BlockExplorer,launchForum:t.LaunchForum,cryptopiaForum:t.CryptopiaForum,totalPremine:t.TotalPremine,walletWindows:t.WalletWindows?Resources.General.Yes:Resources.General.No,walletLinux:t.WalletLinux?Resources.General.Yes:Resources.General.No,walletMac:t.WalletMac?Resources.General.Yes:Resources.General.No,walletMobile:t.WalletMobile?Resources.General.Yes:Resources.General.No,walletWeb:t.WalletWeb?Resources.General.Yes:Resources.General.No,ratingBlockEx:t.BlockExplorer?Resources.General.Yes:Resources.General.No,ratingForum:t.CryptopiaForum?Resources.General.Yes:Resources.General.No,ratingWebsite:t.Website?Resources.General.Yes:Resources.General.No,poolFee:t.PoolFee.toFixed(2),tradeFee:t.TradeFee.toFixed(2),withdrawFee:t.WithdrawFee.toFixed(8),withdrawMin:t.WithdrawMin.toFixed(8),withdrawMax:t.WithdrawMax.toFixed(8),minConfirmations:t.MinConfirmations,tippingExpires:toLocalDate(t.TippingExpires),tipMin:t.TipMin.toFixed(8),rewardExpires:toLocalDate(t.RewardsExpires)}));$(".btn-details-edit").off().on("click",function(){var n=$(this).data("id");n&&openModalGet(updateAction,{id:n},function(t){t.Success&&(showInformation(n),datatable.ajax.reload())})});$(".view-info-btn").off().on("click",function(){$(".view-info").show();$(".view-links").hide();$(".view-rating").hide();$(".view-settings").hide();currentView="";updateUrl()});$(".view-links-btn").off().on("click",function(){$(".view-info").hide();$(".view-links").show();$(".view-rating").hide();$(".view-settings").hide();currentView="links";updateUrl()});$(".view-rating-btn").off().on("click",function(){$(".view-info").hide();$(".view-links").hide();$(".view-rating").show();$(".view-settings").hide();currentView="rating";updateUrl()});$(".view-settings-btn").off().on("click",function(){$(".view-info").hide();$(".view-links").hide();$(".view-rating").hide();$(".view-settings").show();currentView="settings";updateUrl()});currentView=="rating"&&$(".view-rating-btn").trigger("click");currentView=="links"&&$(".view-links-btn").trigger("click");currentView=="settings"&&$(".view-settings-btn").trigger("click");updateUrl()})}function updateUrl(){var n="?coin=DOT";currentCoin!=""&&(n="?coin="+currentCoin);currentView!=""&&(n+="&view="+currentView);History.pushState({},"Cryptopia - "+Resources.CoinInfo.PageTitle,n)}function getPeerInfoModal(n){openModalGet(peerInfoAction,{id:n})}function scrollToItem(){var n=$("#currencyInfo tr.info"),t,i,r;n.length>0&&scroll&&(scroll=!1,t=0,n.position()&&(t=n.position().top),i=n.height()*3,r=$(".dataTables_scrollBody").height(),t>r-i&&$(".dataTables_scrollBody").animate({scrollTop:t-i}))}var currentCoin,messageTemplate=$("#currencyTemplate").html(),content=$(".coininfo-content"),summaryAction=content.data("action"),updateAction=content.data("update"),currentView=content.data("view"),selectedCoin=content.data("coin"),peerInfoAction=content.data("peerinfo"),scroll=!0,initialLoad=!0,table=$("#currencyInfo"),tableaction=table.data("action"),datatable=table.DataTable({order:[[1,"asc"]],lengthChange:!1,processing:!1,bServerSide:!1,searching:!0,scrollY:"0px",scrollX:!1,paging:!1,info:!0,ajax:tableaction,sServerMethod:"GET",language:{emptyTable:Resources.CoinInfo.InfoCurrencyListEmptyMessage},columnDefs:[{targets:0,orderable:!1,visible:!1},{targets:2,searchable:!0,orderable:!1,visible:!1},{targets:9,orderable:!1,visible:!1},{targets:1,render:function(n,t,i){return'<div style="display:inline-block"><div class="sprite-small small/'+i[2]+'-small.png"><\/div> '+n+" ("+i[2]+")<\/div>"}},{targets:3,searchable:!1,orderable:!0,type:"title-numeric",render:function(n){return'<span title="'+n+'"><\/span><span>'+getStarRating(n)+"<\/span>"}},{targets:6,searchable:!1,type:"title-numeric",render:function(n,t,i){return'<span title="'+n+'"><\/span><button class="btn btn-xs btn-info" style="width:110px" onclick="getPeerInfoModal('+i[0]+')">Connections: '+n+"<\/button>"}},{targets:8,render:function(n,t,i){return i[9]?'<span style="white-space:nowrap;cursor:pointer" class="btn-maintenance" data-message="'+i[9]+'">'+n+' <i style="height:100%;vertical-align:middle;" class="fa fa-info-circle text-info"><\/i><\/span>':n}}],fnRowCallback:function(n,t){var i=$(n);t[8]!="OK"&&i.addClass("warning");t[10]==="Delisting"&&(i.removeClass("warning"),i.addClass("danger"));i.off().on("click",function(){$("#currencyInfo tr").removeClass("info");$(this).addClass("info");currentCoin!=t[2]&&(currentCoin=t[2],showInformation(t[0]))});initialLoad==!0&&t[2]==selectedCoin&&(initialLoad=!1,i.trigger("click"))},fnDrawCallback:function(){$(".btn-maintenance").off().on("click",function(){notify(Resources.CoinInfo.InfoWalletStatusMessageTitle,$(this).data("message")||Resources.CoinInfo.InfoWalletStatusMaintenanceMessage)});scrollToItem()}});$(window).resize(function(){var n=$("#table-panel").height()-135;$(".dataTables_scrollBody").height(n)});$(window).resize();