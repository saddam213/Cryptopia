(function(n){function u(n,t){var l=this,f,e,u=[],h=[],c=[],o=[],s=[],i;for(f=r(n,t,12),e=r(n,t,26),i=0;i<f.length;i++)e[i][1]==null?u.push([n[i],null]):u.push([n[i],f[i][1]-e[i][1]]);for(i=0;i<u.length;i++)h.push(u[i][0]),c.push(u[i][1]);for(o=r(h,c,9),i=0;i<u.length;i++)u[i][1]==null?s.push([u[i][0],null]):s.push([u[i][0],u[i][1]-o[i][1]]);return[u,o,s]}function o(n,t){for(var o=[],u=0,a=0,s=0,h=0,f=0,v=0,e=0,c=0,l=0,y=0,p=0,r=n.length,i=0;i<r;i++)u=u+n[i]*t[i],s=s+n[i],h=h+t[i],f=f+Math.pow(n[i],2),e=e+n[i],l=l+t[i];return u=r*u,a=s*h,f=r*f,v=Math.pow(e,2),c=(u-a)/(f-v),y=c*e,p=(l-y)/r,o.push([n[0],t[0]]),step10=c*n[r-1]+p,o.push([n[r-1],step10]),o}function r(n,t,i){for(var s,u=!1,h=i,c=2/(h+1),l,o=[],e=[],a=t.length,v=n[0],r=0;r<a;r++)t[r-1]&&e.push(t[r]),h==e.length?(s=t[r],u?(l=s*c+u*(1-c),u=l):u=f(e),o.push([n[r],u]),e.splice(0,1)):o.push([n[r],null]);return o}function s(n,t,i){for(var u=[],e=[],o=t.length,s=n[0],r=0;r<o;r++)u.push(t[r]),i==u.length?(e.push([n[r],f(u)]),u.splice(0,1)):e.push([n[r],null]);return e}function f(n){for(var t=0,i=n.length,r=i;r--;)t=t+n[r];return t/i}var e=n.getOptions(),t=e.plotOptions,i=n.seriesTypes;t.trendline=n.merge(t.line,{marker:{enabled:!1},tooltip:{valueDecimals:2}});i.trendline=n.extendClass(i.line,{type:"trendline",animate:null,requiresSorting:!1,processData:function(){var t;this.linkedParent&&(t=[].concat(this.linkedParent.options.data),this.setData(this.runAlgorithm(),!1));n.Series.prototype.processData.call(this)},runAlgorithm:function(){var n=this.linkedParent.xData,t=this.linkedParent.yData,i=this.options.periods||100,r=this.options.algorithm||"linear";return this[r](n,t,i)},MACD:function(n,t,i){return u(n,t,i)[0]},signalLine:function(n,t,i){return u(n,t,i)[1]},SMA:function(n,t,i){return s(n,t,i)},EMA:function(n,t,i){return r(n,t,i)},linear:function(n,t,i){return o(n,t,i)}});t.histogram=n.merge(t.column,{borderWidth:0,tooltip:{valueDecimals:2}});i.histogram=n.extendClass(i.column,{type:"histogram",animate:null,requiresSorting:!1,processData:function(){var t;this.linkedParent&&(t=[].concat(this.linkedParent.options.data),this.setData(this.runAlgorithm(),!1));n.Series.prototype.processData.call(this)},runAlgorithm:function(){var n=this.linkedParent.xData,t=this.linkedParent.yData,i=this.options.periods||100,r=this.options.algorithm||"histogram";return this[r](n,t,i)},histogram:function(n,t,i){return u(n,t,i)[2]}})})(Highcharts);